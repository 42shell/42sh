###########################################################################################
# fg/bg jobspec
###########################################################################################

# As notifications are disabled, the jobs stack behavior is the same as in batch mode,
# meaning that done jobs are stored until they are manually notified by a call to jobs.
# That's why I use jobs builtin here, to simulate interactive notifs and update the jobs
# stack.

# ^Z fg
sleep 100
^Z
sleep .4; ps --ppid $$ -o state,comm; sleep .4
fg
^C
sleep .4; jobs; sleep .4

# ^Z bg
sleep 100
^Z
sleep .4; ps --ppid $$ -o state,comm; sleep .4
bg; sleep .4
ps --ppid $$ -o state,comm; sleep .4
kill -9 $!; sleep .4
jobs; sleep .4

# testing %n
sleep 100 & sleep 200 & sleep .4
fg %3; sleep .4
fg %2
^C
sleep .4; jobs; sleep .4
fg %2; sleep .4
fg %0; sleep .4
fg %256; sleep .4
fg %1
^C
sleep .4; jobs; sleep .4

# testing %+ %% %
sleep 100 & sleep 200 & sleep 300 & sleep .4
fg %+
^C
sleep .4; jobs; sleep .4
fg %%
^C
sleep .4; jobs; sleep .4
fg %
^C
sleep .4; jobs; sleep .4

# testing %-
sleep 100 & sleep 200 & sleep 300 & sleep .4
fg %-
^C
sleep .4; jobs; sleep .4
fg %-
^C
sleep .4; jobs; sleep .4
fg %-
^C
sleep .4; jobs; sleep .4

# no current
fg; sleep .4
fg %; sleep .4
bg; sleep .4
bg %%; sleep .4

# job already done
true & sleep .4
fg; sleep .4
true & sleep .4
bg; sleep .4
